{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/jack5341/jack5341/projects/invoice-printer/components/upload/upload.jsx\",\n    _s = $RefreshSig$();\n\nimport { Box, useToast, FormControl, FormLabel, Text, Input, Icon } from \"@chakra-ui/react\";\nimport { DownloadIcon, DeleteIcon, InfoIcon } from \"@chakra-ui/icons\";\nimport { useEffect, useState } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport readXlsxFile from \"read-excel-file\";\nimport Result from \"./result/result\";\nvar excel = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\nvar csv = \"text/csv\";\nexport default function Upload(props) {\n  _s();\n\n  var _useState = useState(null),\n      items = _useState[0],\n      setItems = _useState[1];\n\n  var _useState2 = useState(false),\n      isUpload = _useState2[0],\n      setIsUpload = _useState2[1];\n\n  var isMobile = useMediaQuery({\n    query: \"(max-width: 580px)\"\n  });\n  var toast = useToast();\n  useEffect(function () {\n    return items ? setIsUpload(true) : setIsUpload(false);\n  }, [items]);\n\n  function handleFile(file) {\n    if (!file) toast({\n      title: \"File upload failed\",\n      status: \"warning\",\n      position: \"top-left\",\n      isClosable: true\n    });\n    if (!file.type === excel && !file.type === csv) toast({\n      title: \"Wrong file type\",\n      status: \"error\",\n      position: \"top-left\",\n      isClosable: true\n    });\n\n    switch (file.type) {\n      case excel:\n        readXlsxFile(file).then(function (rows) {\n          setItems(rows);\n        });\n        setIsUpload(true);\n        break;\n\n      case csv:\n        var fileReader = new FileReader();\n\n        fileReader.onloadend = function (e) {\n          setItems(fileReader.result.toString().split(\"\\n\").map(function (e) {\n            return e.trim();\n          }).map(function (e) {\n            return e.split(\",\").map(function (e) {\n              return e.trim();\n            });\n          }));\n        };\n\n        setIsUpload(true);\n        break;\n\n      default:\n        toast({\n          title: \"Somethings were wrong\",\n          status: \"error\",\n          position: \"top-left\",\n          isClosable: true\n        });\n        break;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    padding: \"4rem\",\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      fontSize: \"2xl\",\n      children: [/*#__PURE__*/_jsxDEV(InfoIcon, {\n        mr: \"0.5rem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), \" You can drag your file to this box for parsing your file.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      borderRadius: \"0.5rem\",\n      border: \"2px dashed gray\",\n      mt: \"3\",\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        color: props.colorMode === \"light\" ? \"#094223\" : \"white\",\n        p: \"1rem\",\n        fontSize: \"2xl\",\n        textAlign: \"center\",\n        fontWeight: \"bold\",\n        children: [isUpload ? /*#__PURE__*/_jsxDEV(CheckIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(DownloadIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 39\n        }, this), \" Upload your file\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        onChange: function onChange(e) {\n          return handleFile(e.target.files[0]);\n        },\n        type: \"file\",\n        accept: \".png\",\n        opacity: \"0\",\n        border: \"0px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this) // <Box>\n  //   <Box\n  //     padding={isMobile ? \"0.5rem\" : \"1rem\"}\n  //     borderRadius=\"0.5rem\"\n  //     border=\"1px solid gray\"\n  //   >\n  //     <Flex>\n  //       <Box>\n  //         <CircleIcon\n  //           boxSize={isMobile ? 8 : 10}\n  //           color={isUpload ? \"green.400\" : \"red.400\"}\n  //         />\n  //       </Box>\n  //       <Spacer />\n  //       <Box>\n  //         <Input\n  //           type=\"file\"\n  //           id=\"doc-input\"\n  //           accept=\".xlsx, .csv\"\n  //           onChange={(e) => parseFile(e.target.files[0])}\n  //           name=\"doc\"\n  //           display=\"none\"\n  //         />\n  //         {isUpload ? (\n  //           <Button\n  //             _focus=\"none\"\n  //             onClick={() => {\n  //               setItems(null);\n  //               document.getElementById(\"doc-input\").value = null;\n  //             }}\n  //             rightIcon={<DeleteIcon />}\n  //             size={isMobile ? \"sm\" : \"md\"}\n  //             colorScheme=\"red\"\n  //           >\n  //             Delete File\n  //           </Button>\n  //         ) : (\n  //           <Button\n  //             _focus=\"none\"\n  //             onClick={() => document.getElementById(\"doc-input\").click()}\n  //             rightIcon={<DownloadIcon />}\n  //             size={isMobile ? \"sm\" : \"md\"}\n  //             colorScheme=\"green\"\n  //           >\n  //             Upload Your File\n  //           </Button>\n  //         )}\n  //       </Box>\n  //     </Flex>\n  //   </Box>\n  //   {items\n  //     ? items\n  //         .slice(1)\n  //         .map((element, index) => (\n  //           <Result key={index} label={items[0]} items={element} />\n  //         ))\n  //     : null}\n  // </Box>\n  ;\n}\n\n_s(Upload, \"Oz1JFdje6w8h23eC088odYBhDuc=\", false, function () {\n  return [useMediaQuery, useToast];\n});\n\n_c = Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/home/jack5341/jack5341/projects/invoice-printer/components/upload/upload.jsx"],"names":["Box","useToast","FormControl","FormLabel","Text","Input","Icon","DownloadIcon","DeleteIcon","InfoIcon","useEffect","useState","useMediaQuery","readXlsxFile","Result","excel","csv","Upload","props","items","setItems","isUpload","setIsUpload","isMobile","query","toast","handleFile","file","title","status","position","isClosable","type","then","rows","fileReader","FileReader","onloadend","e","result","toString","split","map","trim","colorMode","target","files"],"mappings":"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","sourcesContent":["import {\n  Box,\n  useToast,\n  FormControl,\n  FormLabel,\n  Text,\n  Input,\n  Icon,\n} from \"@chakra-ui/react\";\nimport { DownloadIcon, DeleteIcon, InfoIcon } from \"@chakra-ui/icons\";\nimport { useEffect, useState } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport readXlsxFile from \"read-excel-file\";\n\nimport Result from \"./result/result\";\n\nconst excel =\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\nconst csv = \"text/csv\";\n\nexport default function Upload(props) {\n  const [items, setItems] = useState(null);\n  const [isUpload, setIsUpload] = useState(false);\n  const isMobile = useMediaQuery({ query: \"(max-width: 580px)\" });\n  const toast = useToast();\n\n  useEffect(() => (items ? setIsUpload(true) : setIsUpload(false)), [items]);\n\n  function handleFile(file) {\n    if (!file)\n      toast({\n        title: \"File upload failed\",\n        status: \"warning\",\n        position: \"top-left\",\n        isClosable: true,\n      });\n\n    if (!file.type === excel && !file.type === csv)\n      toast({\n        title: \"Wrong file type\",\n        status: \"error\",\n        position: \"top-left\",\n        isClosable: true,\n      });\n\n    switch (file.type) {\n      case excel:\n        readXlsxFile(file).then((rows) => {\n          setItems(rows);\n        });\n        setIsUpload(true);\n        break;\n\n      case csv:\n        let fileReader = new FileReader();\n        fileReader.onloadend = (e) => {\n          setItems(\n            fileReader.result\n              .toString()\n              .split(\"\\n\")\n              .map((e) => e.trim())\n              .map((e) => e.split(\",\").map((e) => e.trim()))\n          );\n        };\n        setIsUpload(true);\n        break;\n\n      default:\n        toast({\n          title: \"Somethings were wrong\",\n          status: \"error\",\n          position: \"top-left\",\n          isClosable: true,\n        });\n        break;\n    }\n  }\n\n  return (\n    <Box padding=\"4rem\">\n    <Text fontSize=\"2xl\">\n        <InfoIcon mr=\"0.5rem\"/> You can drag your file to this box for parsing your file.\n    </Text>\n      <FormControl borderRadius=\"0.5rem\" border=\"2px dashed gray\" mt=\"3\">\n        <FormLabel\n          color={props.colorMode === \"light\" ? \"#094223\" : \"white\"}\n          p=\"1rem\"\n          fontSize=\"2xl\"\n          textAlign=\"center\"\n          fontWeight=\"bold\"\n        >\n          {isUpload ? <CheckIcon /> : <DownloadIcon />} Upload your file\n        </FormLabel>\n        <Input\n          onChange={(e) => handleFile(e.target.files[0])}\n          type=\"file\"\n          accept=\".png\"\n          opacity=\"0\"\n          border=\"0px\"\n        />\n      </FormControl>\n    </Box>\n    // <Box>\n    //   <Box\n    //     padding={isMobile ? \"0.5rem\" : \"1rem\"}\n    //     borderRadius=\"0.5rem\"\n    //     border=\"1px solid gray\"\n    //   >\n    //     <Flex>\n    //       <Box>\n    //         <CircleIcon\n    //           boxSize={isMobile ? 8 : 10}\n    //           color={isUpload ? \"green.400\" : \"red.400\"}\n    //         />\n    //       </Box>\n    //       <Spacer />\n    //       <Box>\n    //         <Input\n    //           type=\"file\"\n    //           id=\"doc-input\"\n    //           accept=\".xlsx, .csv\"\n    //           onChange={(e) => parseFile(e.target.files[0])}\n    //           name=\"doc\"\n    //           display=\"none\"\n    //         />\n    //         {isUpload ? (\n    //           <Button\n    //             _focus=\"none\"\n    //             onClick={() => {\n    //               setItems(null);\n    //               document.getElementById(\"doc-input\").value = null;\n    //             }}\n    //             rightIcon={<DeleteIcon />}\n    //             size={isMobile ? \"sm\" : \"md\"}\n    //             colorScheme=\"red\"\n    //           >\n    //             Delete File\n    //           </Button>\n    //         ) : (\n    //           <Button\n    //             _focus=\"none\"\n    //             onClick={() => document.getElementById(\"doc-input\").click()}\n    //             rightIcon={<DownloadIcon />}\n    //             size={isMobile ? \"sm\" : \"md\"}\n    //             colorScheme=\"green\"\n    //           >\n    //             Upload Your File\n    //           </Button>\n    //         )}\n    //       </Box>\n    //     </Flex>\n    //   </Box>\n    //   {items\n    //     ? items\n    //         .slice(1)\n    //         .map((element, index) => (\n    //           <Result key={index} label={items[0]} items={element} />\n    //         ))\n    //     : null}\n    // </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}