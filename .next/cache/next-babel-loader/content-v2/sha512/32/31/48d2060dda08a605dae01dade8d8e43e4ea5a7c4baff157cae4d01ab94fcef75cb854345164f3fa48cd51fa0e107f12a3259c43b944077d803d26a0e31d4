{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/jack5341/jack5341/projects/invoice-printer/components/upload/upload.jsx\",\n    _s = $RefreshSig$();\n\nimport { Box, useToast, FormControl, FormLabel, Text, Input, Button, Collapse, useColorMode } from \"@chakra-ui/react\";\nimport { DownloadIcon, DeleteIcon, InfoIcon, CheckIcon } from \"@chakra-ui/icons\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport readXlsxFile from \"read-excel-file\";\nimport Result from \"./result/result\";\nvar excel = \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\nvar csv = \"text/csv\";\nimport { ItemStore } from \"../../context/itemStore\";\nexport default function Upload(props) {\n  _s();\n\n  var _this = this;\n\n  var value = useContext(ItemStore);\n\n  var _useColorMode = useColorMode(),\n      colorMode = _useColorMode.colorMode;\n\n  var _useState = useState(null),\n      items = _useState[0],\n      setItems = _useState[1];\n\n  var _useState2 = useState(false),\n      isUpload = _useState2[0],\n      setIsUpload = _useState2[1];\n\n  var isTablet = useMediaQuery({\n    query: \"(max-width: 1024px)\"\n  });\n  var isMobileXL = useMediaQuery({\n    query: \"(max-width: 600px)\"\n  });\n  var toast = useToast();\n  useEffect(function () {\n    return items ? setIsUpload(true) : setIsUpload(false);\n  }, [items]);\n\n  function handleFile(file) {\n    if (!file) return toast({\n      title: \"File upload failed\",\n      status: \"warning\",\n      position: \"top-left\",\n      isClosable: true\n    });\n    if (!file.type === excel && !file.type === csv) return toast({\n      title: \"Wrong file type\",\n      status: \"error\",\n      position: \"top-left\",\n      isClosable: true\n    });\n\n    switch (file.type) {\n      case excel:\n        readXlsxFile(file).then(function (rows) {\n          value.setvalue(rows);\n        });\n        setIsUpload(true);\n        break;\n\n      case csv:\n        var fileReader = new FileReader();\n\n        fileReader.onloadend = function (e) {\n          value.setvalue(fileReader.result.toString().split(\"\\n\").map(function (e) {\n            return e.trim();\n          }).map(function (e) {\n            return e.split(\",\").map(function (e) {\n              return e.trim();\n            });\n          }));\n        };\n\n        setIsUpload(true);\n        break;\n\n      default:\n        toast({\n          title: \"Wrong file type\",\n          status: \"error\",\n          position: \"top-left\",\n          isClosable: true\n        });\n        break;\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(Box, {\n    padding: (isTablet ? \"0rem\" : \"4rem\") && (isMobileXL ? \"1rem\" : \"4rem\"),\n    paddingTop: isTablet ? \"0rem\" : null,\n    borderLeft: isMobileXL ? \"0\" : \"1px solid gray\",\n    children: [/*#__PURE__*/_jsxDEV(Text, {\n      color: colorMode === \"light\" ? \"#107c41\" : \"white\",\n      fontSize: (isTablet ? \"xl\" : \"2xl\") && (isMobileXL ? \"md\" : \"2xl\"),\n      children: [/*#__PURE__*/_jsxDEV(InfoIcon, {\n        mr: \"0.5rem\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), \" \", props.texts.uploadlayer]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n      \"in\": isUpload,\n      animateOpacity: true,\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        mt: \"2\",\n        _focus: \"none\",\n        onClick: function onClick() {\n          value.setvalue(null);\n          setIsUpload(false);\n          document.getElementsByClassName(\"docs\").value = null;\n        },\n        size: isMobileXL ? \"sm\" : \"md\",\n        leftIcon: /*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this),\n        colorScheme: \"green\",\n        display: \"block\",\n        w: \"100%\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FormControl, {\n      borderRadius: \"0.5rem\",\n      border: \"2px dashed gray\",\n      mt: \"3\",\n      children: [/*#__PURE__*/_jsxDEV(FormLabel, {\n        color: colorMode === \"light\" ? \"#107c41\" : \"white\",\n        p: \"1rem\",\n        fontWeight: \"bold\",\n        fontSize: isMobileXL ? \"md\" : \"2xl\",\n        children: [isUpload ? /*#__PURE__*/_jsxDEV(CheckIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 23\n        }, this) : /*#__PURE__*/_jsxDEV(DownloadIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 39\n        }, this), \" Upload your file\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        className: \"docs\",\n        onChange: function onChange(e) {\n          return handleFile(e.target.files[0]);\n        },\n        type: \"file\",\n        opacity: \"0\",\n        accept: \".xlsx, .csv\",\n        border: \"0px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this), value.value ? value.value.slice(1).map(function (element, index) {\n      return /*#__PURE__*/_jsxDEV(Result, {\n        label: value.value[0],\n        items: element\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 15\n      }, _this);\n    }) : null]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Upload, \"ZRgqb/qDEug1A9Vi6UzuC1WrVPI=\", false, function () {\n  return [useColorMode, useMediaQuery, useMediaQuery, useToast];\n});\n\n_c = Upload;\n\nvar _c;\n\n$RefreshReg$(_c, \"Upload\");","map":{"version":3,"sources":["/home/jack5341/jack5341/projects/invoice-printer/components/upload/upload.jsx"],"names":["Box","useToast","FormControl","FormLabel","Text","Input","Button","Collapse","useColorMode","DownloadIcon","DeleteIcon","InfoIcon","CheckIcon","useEffect","useState","useContext","useMediaQuery","readXlsxFile","Result","excel","csv","ItemStore","Upload","props","value","colorMode","items","setItems","isUpload","setIsUpload","isTablet","query","isMobileXL","toast","handleFile","file","title","status","position","isClosable","type","then","rows","setvalue","fileReader","FileReader","onloadend","e","result","toString","split","map","trim","texts","uploadlayer","document","getElementsByClassName","target","files","slice","element","index"],"mappings":"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","sourcesContent":["import {\n  Box,\n  useToast,\n  FormControl,\n  FormLabel,\n  Text,\n  Input,\n  Button,\n  Collapse,\n  useColorMode,\n} from \"@chakra-ui/react\";\nimport {\n  DownloadIcon,\n  DeleteIcon,\n  InfoIcon,\n  CheckIcon,\n} from \"@chakra-ui/icons\";\nimport { useEffect, useState, useContext } from \"react\";\nimport { useMediaQuery } from \"react-responsive\";\nimport readXlsxFile from \"read-excel-file\";\n\nimport Result from \"./result/result\";\n\nconst excel =\n  \"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\nconst csv = \"text/csv\";\n\nimport { ItemStore } from \"../../context/itemStore\"\n\nexport default function Upload(props) {\n  const value = useContext(ItemStore)\n  const { colorMode } = useColorMode();\n  const [items, setItems] = useState(null);\n  const [isUpload, setIsUpload] = useState(false);\n  const isTablet = useMediaQuery({ query: \"(max-width: 1024px)\" });\n  const isMobileXL = useMediaQuery({ query: \"(max-width: 600px)\" });\n  const toast = useToast();\n\n  useEffect(() => (items ? setIsUpload(true) : setIsUpload(false)), [items]);\n\n  function handleFile(file) {\n\n    if (!file)\n      return toast({\n        title: \"File upload failed\",\n        status: \"warning\",\n        position: \"top-left\",\n        isClosable: true,\n      });\n\n    if (!file.type === excel && !file.type === csv)\n      return toast({\n        title: \"Wrong file type\",\n        status: \"error\",\n        position: \"top-left\",\n        isClosable: true,\n      });\n\n    switch (file.type) {\n      case excel:\n        readXlsxFile(file).then((rows) => {\n          value.setvalue(rows);\n        });\n        setIsUpload(true);\n        break;\n\n      case csv:\n        let fileReader = new FileReader();\n        fileReader.onloadend = (e) => {\n          value.setvalue(\n            fileReader.result\n              .toString()\n              .split(\"\\n\")\n              .map((e) => e.trim())\n              .map((e) => e.split(\",\").map((e) => e.trim()))\n          );\n        };\n        setIsUpload(true);\n        break;\n\n      default:\n        toast({\n          title: \"Wrong file type\",\n          status: \"error\",\n          position: \"top-left\",\n          isClosable: true,\n        });\n        break;\n    }\n  }\n\n  return (\n    <Box\n      padding={(isTablet ? \"0rem\" : \"4rem\") && (isMobileXL ? \"1rem\" : \"4rem\")}\n      paddingTop={isTablet ? \"0rem\" : null}\n      borderLeft={isMobileXL ? \"0\" : \"1px solid gray\"}\n    >\n      <Text\n        color={colorMode === \"light\" ? \"#107c41\" : \"white\"}\n        fontSize={(isTablet ? \"xl\" : \"2xl\") && (isMobileXL ? \"md\" : \"2xl\")}\n      >\n        <InfoIcon mr=\"0.5rem\" /> {props.texts.uploadlayer}\n      </Text>\n      <Collapse in={isUpload} animateOpacity>\n        <Button\n          mt=\"2\"\n          _focus=\"none\"\n          onClick={() => {\n            value.setvalue(null);\n            setIsUpload(false);\n            document.getElementsByClassName(\"docs\").value = null;\n          }}\n          size={isMobileXL ? \"sm\" : \"md\"}\n          leftIcon={<DeleteIcon />}\n          colorScheme=\"green\"\n          display=\"block\"\n          w=\"100%\"\n        >\n          Delete\n        </Button>\n      </Collapse>\n      <FormControl\n        borderRadius=\"0.5rem\"\n        border=\"2px dashed gray\"\n        mt=\"3\"\n      >\n        <FormLabel\n          color={colorMode === \"light\" ? \"#107c41\" : \"white\"}\n          p=\"1rem\"\n          fontWeight=\"bold\"\n          fontSize={isMobileXL ? \"md\" : \"2xl\"}\n        >\n          {isUpload ? <CheckIcon /> : <DownloadIcon />} Upload your file\n        </FormLabel>\n        <Input\n          className=\"docs\"\n          onChange={(e) => handleFile(e.target.files[0])}\n          type=\"file\"\n          opacity=\"0\"\n          accept=\".xlsx, .csv\"\n          border=\"0px\"\n        />\n      </FormControl>\n      {value.value\n        ? value.value\n            .slice(1)\n            .map((element, index) => (\n              <Result key={index} label={value.value[0]} items={element} />\n            ))\n        : null}\n    </Box>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}